class Foo:
    parent: weak[Foo?]
    children: [Foo]

    func __init__(self, parent: Foo? = None):
        self.parent = parent
        self.children = []

    func __del__(self):
        print("Destroying.")

    func create(self) -> Foo:
        child = Foo(self)
        self.children.append(child)

        return child

    func destroy(self):
        self.parent = None

func work():
    foo = Foo()
    bar = foo.create()

func main():
    work()
